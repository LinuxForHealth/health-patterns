name: Java CI

on:
  push:
    paths:
    - '.github/workflows/expose-kafka*'
    - 'services/expose-kafka/**'
    - 'scripts/expose-kafka*'
    inputs:
      environment:
        description: 'Define env name'
        required: true
        default: 'prod'


jobs:
#  build:
#    name: Build Expose-Kafka
#    runs-on: ubuntu-latest
  docker:
    name: Build and Push Expose-Kafka Docker Container
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Login to Docker Hub
      uses: docker/login-action@v1
      with:
        username:
        password: ${{ secrets.DOCKER_PASSWORD }}
    - name: Run build script
      run: ./scripts/expose-kafka-build.sh -n=expose-kafka -r=${{ secrets.DOCKER_USERNAME }} -m=PUSH --docker-user=${{ secrets.DOCKER_HUB_USERNAME }} --docker-token=${{ secrets.DOCKER_HUB_ACCESS_TOKEN }} --private-docker-user=${{ secrets.PRIVATE_DOCKER_HUB_USERNAME }} --private-docker-token=${{ secrets.PRIVATE_DOCKER_HUB_ACCESS_TOKEN }}
